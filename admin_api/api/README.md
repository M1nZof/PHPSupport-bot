# API methods

## Клиент (тот, кто делает заказы)
Метод url (`/client/<Метод>`)
- Оплатил подписку → хочу убедиться, что всё в порядке → получил доступ к чат-боту, где могу оставлять заявки
    - Доступ к боту, если telegram_id есть в БД
    - Метод POST`check_client/[telegram_id[int]]`
- Недоволен своим сайтом → хочу получить помощь от PHPSupport → бот предложил оставить заказ на фичу и предложил примеры заявок
    - Создал заявку
    - Метод POST`create_task/[telegram_id[int], description[str]]`
- Составил заявку, отправил боту → хочу, чтобы мне помогли как можно скорее → бот предупреждает, что мне помогут в течение этого дня
- Составил заявку, отправил боту → хочу получить помощь → бот попросил кренделя от админки сайта, чтобы передать их подрядчику
     - Метод POST`help/[telegram_id[int], [task_id[int], text[str]]`
- Отправил заявку, прошло время → хочу получить помощь → бот ответил, что подрядчик выбран и переслал его уточняющие вопросы, если они есть
    - Метод будет реализован со стороны `Подрядчика`
- Получил уточняющие вопросы от подрядчика в боте → хочу ответить на них, но переживаю, что ответ не дойдёт → бот предупредил, что надо ответить прямо в чат боту, а он перешлёт ответ подрядчику
    - Вместе с вопросами от подрядчика получаю предупреждение `надо ответить прямо в чат боту, а он перешлёт ответ подрядчику` ??????
- Ответил ответы на вопросы → хочу убедиться, что всё в порядке → бот ответил, что переслал ответы подрядчику
    - Метод POST`answer_question/[telegram_id[int], [task_id[int], text[str]]`
- Отправил заявку на тех. помощь → хочу понять, взялись ли за мой проект или всё ещё нет → как только подрядчик нажал на кнопку “взяться за работу” – я получил уведомление, что подрядчик взялся за проект и уже работает над ним
    - Метод будет реализован со стороны `Подрядчика`
- Отправил заявку на тех. помощь → хочу понять когда мне помогут → вместе с сообщением о том, что заказчик взялся за работу, я получаю его эстимейт по срокам выполнения
    - Метод будет реализован со стороны `Подрядчика`
- Отправил заявку на тех. помощь, ответил на доп. вопросы и получил уведомление, что за работу уже взялся подрядчик → хочу узнать, когда он закончит → бот прислал сообщение, когда работа выполнена
    - Метод будет реализован со стороны `Подрядчика`, если работа будет выполнена - то получаем сообщение



## Заказчик (админ)
- Совершил новую продажу → хочу открыть клиенту доступ к боту → открыл
- Прособеседовали нового подрядчика → хочу открыть ему доступ к приёму заказов → открыл
- Подрядчик разочаровал → хочу закрыть ему доступ к заказам → закрыл, его заказы ушли в состояние первичной заявки, если на нём такие были
- Подписка клиента закончилась → хочу остановить подписку → он может получить помощь по текущей проблеме, но не может открывать новые
- Прошёл месяц с прошлого фин. планирования → хочу узнать, сколько в среднем заявок оставляют в боте ежемесячно + выгрузку по каждому клиенту → получил числа
- Прошёл месяц с прошлого фин. планирования → Хочу узнать, сколько платить каждому из подрядчиков → узнал суммы



## Подрядчик (тот, кто выполняет заказы)
Метод url (`/contractor/<Метод>`)
- Получил предложение работать на платформе, согласился → хочу получить к ней доступ и узнать о том, как с ней работать → получил доступ к боту и сообщение с объяснением как с ним работать
    - Метод GET`check_constractor/[telegram_id[int]`
- Получил предложение работать на платформе, согласился → хочу узнать, сколько буду зарабатывать → бот предлагает фиксированную ставку за заказ
    - На стороне ТГ информация
- Появилось свободное время для нового заказа → хочу полистать заказы и выбрать себе что-нибудь → вижу несколько актуальных заказов
    - Метод GET`get_tasks/[telegram_id[int]`
- Понравился один из заказов → хочу забрать его на себя → нажал на кнопку, теперь он мой
    - Метод GET`take_task/[telegram_id[int], [task_id[int]`
- По заказу появились доп. вопросы → не понимаю куда их писать → бот заранее предупредил, что ему можно задать вопрос и он перешлёт его заказчику
    - Метод POST`ask_question/[telegram_id[int], [task_id[int], text[str]]`
- Для взятия заказа бот требует эстимейт по времени → хочу получить уже заказ → заполнил эстимейты в свободном виде и нажал кнопку “взяться за работу”
    - Метод POST `task_time/[telegram_id[int], [text[str]]` 
- Взял заказ → нужен доступ к PHP-админке сайта → бот уже заранее его прислал
    - Метод GET`get_admin_params/[telegram_id[int]`
- Выполнил заказ → хочу отчитаться, что можно принимать работу → нажал на кнопку в боте и тот закрыл заказ
    - Метод POST`close_task[task_id[int]`
- Выполнил несколько заказов → хочу узнать, сколько я заработал → бот показывает мне суммарную заработанную сумму, либо ставку за заказ и количество закрытых заказов
